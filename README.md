# Система управления продажей обуви

Веб-приложение для управления продажей обуви с различными ролями пользователей.

## Структура проекта

```
20pract/
├── app/
│   ├── __init__.py
│   ├── main.py              # Главный файл приложения
│   ├── database.py         # Настройка БД
│   ├── models.py           # Модели данных
│   ├── schemas.py          # Pydantic схемы
│   ├── routers/            # Роутеры
│   │   ├── auth.py         # Авторизация
│   │   ├── products.py     # Товары
│   │   └── orders.py       # Заказы
│   ├── services/           # Бизнес-логика
│   │   ├── auth_service.py
│   │   ├── product_service.py
│   │   └── order_service.py
│   ├── templates/          # HTML шаблоны
│   │   ├── base.html
│   │   ├── login.html
│   │   ├── products.html
│   │   ├── product_form.html
│   │   ├── orders.html
│   │   └── order_form.html
│   └── static/             # Статические файлы
│       ├── css/
│       │   └── style.css
│       ├── js/
│       │   └── main.js
│       └── images/
│           └── products/
├── migrations/             # Миграции БД
│   ├── init_db.py
│   ├── import_data.py
│   └── create_db_script.sql
├── resources/              # Ресурсы
│   └── import_data/        # Файлы для импорта
├── tests/                  # Тесты
├── requirements.txt
└── README.md
```

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Инициализируйте базу данных:
```bash
python migrations/init_db.py
```

3. Импортируйте данные (если есть файлы в resources/import_data/):
```bash
python migrations/import_data.py
```

4. Запустите приложение:
```bash
python -m uvicorn app.main:app --reload
```

Приложение будет доступно по адресу: http://localhost:8000

## Роли пользователей

### Гость
- Просмотр товаров (без фильтрации, сортировки, поиска)

### Клиент (client)
- Просмотр товаров (без фильтрации, сортировки, поиска)

### Менеджер (manager)
- Просмотр товаров (с фильтрацией, сортировкой, поиском)
- Просмотр заказов

### Администратор (admin)
- Просмотр товаров (с фильтрацией, сортировкой, поиском)
- Добавление/редактирование/удаление товаров
- Просмотр/добавление/редактирование/удаление заказов

## Учетные записи по умолчанию

- **Администратор**: login: `admin`, password: `admin123`
- **Менеджер**: login: `manager`, password: `manager123`
- **Клиент**: login: `client`, password: `client123`

## Особенности

- Условное форматирование товаров:
  - Скидка > 15% - зеленый фон (#2E8B57)
  - Товар со скидкой - перечеркнутая цена красным цветом
  - Нет на складе - голубой фон
- Поиск в реальном времени по всем текстовым полям
- Фильтрация по поставщику
- Сортировка по количеству на складе
- Загрузка и обработка изображений товаров (300x200px)
- Валидация данных на клиенте и сервере
- Обработка ошибок с информативными сообщениями

## База данных

Используется SQLite (по умолчанию) или PostgreSQL. Схема БД соответствует 3NF с обеспечением ссылочной целостности.

## Разработка

Для разработки рекомендуется использовать виртуальное окружение:
```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

