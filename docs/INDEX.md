# Документация по задачам доработки

## Обзор задач

| № | Задача | Файл документации | Сложность | Риск |
|---|--------|-------------------|-----------|------|
| 1 | Уведомления об ошибках (всплывающие окна) | [TASK_01_ERROR_NOTIFICATIONS.md](TASK_01_ERROR_NOTIFICATIONS.md) | Средняя | Низкий |
| 2 | Подсветка синим при нулевом остатке | [TASK_02_BLUE_HIGHLIGHT_ZERO_STOCK.md](TASK_02_BLUE_HIGHLIGHT_ZERO_STOCK.md) | Низкая | Минимальный |
| 3 | Форматирование цены, скидки, ед. измерения | [TASK_03_TEXT_FORMAT_PRICE_DISCOUNT_UNIT.md](TASK_03_TEXT_FORMAT_PRICE_DISCOUNT_UNIT.md) | Низкая | Минимальный |
| 4 | Скрыть код подтверждения заказа | [TASK_04_HIDE_CONFIRMATION_CODE.md](TASK_04_HIDE_CONFIRMATION_CODE.md) | Низкая | Минимальный |
| 5 | Мгновенное обновление списков (CRUD) | [TASK_05_REALTIME_CRUD_REFRESH.md](TASK_05_REALTIME_CRUD_REFRESH.md) | Высокая | Средний |
| 6 | Ввод артикула при добавлении товара в заказ | [TASK_06_ARTICLE_INPUT_FOR_ORDER.md](TASK_06_ARTICLE_INPUT_FOR_ORDER.md) | Средняя | Низкий |

## Рекомендуемый порядок выполнения

### Этап 1: Минимальные изменения (быстрые победы)
1. **Задача 4** — Скрыть код (1 строка удаления)
2. **Задача 2** — Синяя подсветка (2 строки изменения)
3. **Задача 3** — Форматирование текста (5-10 строк)

### Этап 2: Функциональные доработки
4. **Задача 5** — Исправить обновление списков (критично для пользователей!)
5. **Задача 6** — Ввод артикула (улучшение UX)

### Этап 3: UI-улучшения
6. **Задача 1** — Всплывающие уведомления (визуальное улучшение)

## Матрица зависимостей

```
Задача 1 ──────────┐
                   │
Задача 2 ──────────┤
                   │
Задача 3 ──────────┼──► Независимые, можно выполнять параллельно
                   │
Задача 4 ──────────┤
                   │
Задача 6 ──────────┘

Задача 5 ──────────────► Приоритетная (исправление бага)
```

## Файлы, которые будут изменены

| Файл | Задачи |
|------|--------|
| `desktop/auth_view.py` | 1 |
| `desktop/products_view.py` | 1, 2, 3 |
| `desktop/orders_view.py` | 1, 4, 5, 6 |
| `app/services/order_service.py` | 5 |
| `desktop/notifications.py` (новый) | 1 |

## Критические замечания

### По задаче 5 (обновление списков)
**Обнаружена потенциальная ошибка**: В `create_order()` не указывается поле `code`, которое является обязательным (`nullable=False`). Это может вызывать скрытую ошибку при создании заказа.

**Требуется проверить**:
1. Как генерируется `code` при создании заказа
2. Логи ошибок при создании заказа
3. Содержимое таблицы `orders` в БД

### По задаче 1 (уведомления)
Рекомендуется создать отдельный модуль `desktop/notifications.py` для централизации логики уведомлений.

## Команды для тестирования

```bash
# Запуск приложения
python desktop_app.py

# Проверка БД
sqlite3 shoe_store.db "SELECT * FROM orders LIMIT 5;"
sqlite3 shoe_store.db "SELECT * FROM products WHERE stock_quantity = 0;"
```

## Контакты

Документация создана автоматически на основе анализа кода.  
Дата создания: 2025-12-18

